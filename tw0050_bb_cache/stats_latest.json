{
  "atr": {
    "atr": 1.2304300879000425,
    "atr_days": 14,
    "atr_pct": 1.5938214203880987,
    "tr_mode": "OHLC"
  },
  "dq": {
    "flags": [
      "PRICE_SERIES_BREAK_DETECTED",
      "FWD_MDD_CLEAN_APPLIED",
      "FWD_MDD_OUTLIER_MIN_RAW_20D",
      "RAW_OUTLIER_EXCLUDED_BY_CLEAN"
    ],
    "notes": [
      "Detected 1 break(s) by ratio thresholds; sample: 2014-01-02(r=0.249); hi=1.8, lo=0.555556.",
      "Computed forward_mdd_clean by excluding windows impacted by detected breaks (no price adjustment).",
      "Clean masks built per-window: clean20 excludes entries whose [t+1..t+20] includes break; clean10 excludes entries whose [t+1..t+10] includes break.",
      "forward_mdd_raw_20D min=-0.7628 < threshold(-0.4); see raw min_audit_trail.",
      "Primary forward_mdd uses CLEAN; raw outlier windows excluded by break mask."
    ]
  },
  "forward_mdd": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_20D",
    "min": -0.2557003366113709,
    "min_entry_date": "2020-02-19",
    "min_entry_price": 19.41792106628418,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452752113342285,
    "n": 4151,
    "p05": -0.09279032634415862,
    "p10": -0.06866959831114061,
    "p25": -0.04022440701984337,
    "p50": -0.018276234498060706
  },
  "forward_mdd10": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_10D",
    "min": -0.24002209906184802,
    "min_entry_date": "2020-03-05",
    "min_entry_price": 19.017332077026367,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452752113342285,
    "n": 4171,
    "p05": -0.06313641022145106,
    "p10": -0.047979700742551645,
    "p25": -0.02710049462729547,
    "p50": -0.011383719023961514
  },
  "forward_mdd10_clean": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_10D",
    "min": -0.24002209906184802,
    "min_entry_date": "2020-03-05",
    "min_entry_price": 19.017332077026367,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452752113342285,
    "n": 4171,
    "p05": -0.06313641022145106,
    "p10": -0.047979700742551645,
    "p25": -0.02710049462729547,
    "p50": -0.011383719023961514
  },
  "forward_mdd10_raw": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_raw_10D",
    "min": -0.7553146349820127,
    "min_entry_date": "2013-12-30",
    "min_entry_price": 37.47614288330078,
    "min_future_date": "2014-01-09",
    "min_future_price": 9.1698637008667,
    "n": 4181,
    "p05": -0.0642200906736814,
    "p10": -0.048324924897418575,
    "p25": -0.027281315277046025,
    "p50": -0.011424422937231116
  },
  "forward_mdd_clean": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_20D",
    "min": -0.2557003366113709,
    "min_entry_date": "2020-02-19",
    "min_entry_price": 19.41792106628418,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452752113342285,
    "n": 4151,
    "p05": -0.09279032634415862,
    "p10": -0.06866959831114061,
    "p25": -0.04022440701984337,
    "p50": -0.018276234498060706
  },
  "forward_mdd_raw": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_raw_20D",
    "min": -0.7627551799413405,
    "min_entry_date": "2013-12-30",
    "min_entry_price": 37.47614288330078,
    "min_future_date": "2014-02-05",
    "min_future_price": 8.891020774841309,
    "n": 4171,
    "p05": -0.09523871113431076,
    "p10": -0.07016143375465389,
    "p25": -0.040786004122111696,
    "p50": -0.01846724209809414
  },
  "latest": {
    "adjclose": 77.19999694824219,
    "band_width_geo_pct": 37.6086937218195,
    "band_width_std_pct": 31.655991313053466,
    "bb_lower": 55.893853230104824,
    "bb_ma": 66.40432726542154,
    "bb_pos": 1.0,
    "bb_pos_raw": 1.013567211457144,
    "bb_sd": 5.255237017658359,
    "bb_upper": 76.91480130073826,
    "bb_z": 2.0542688458285756,
    "close": 77.19999694824219,
    "date": "2026-02-11",
    "dist_to_lower_pct": 27.598632850234196,
    "dist_to_upper_pct": -0.36942442846873674,
    "price_used": 77.19999694824219,
    "state": "EXTREME_UPPER_BAND"
  },
  "meta": {
    "bb_k": 2.0,
    "bb_window": 60,
    "break_detection": {
      "break_count": 1,
      "break_ratio_hi": 1.8,
      "break_ratio_lo": 0.5555555555555556,
      "forward_mode_primary": "clean"
    },
    "data_source": "yfinance_yahoo_or_twse_fallback",
    "fetch_start_effective": "2003-01-01",
    "fwd_days": 20,
    "fwd_days_short": 10,
    "last_date": "2026-02-11",
    "module": "tw0050_bb",
    "price_calc": "adjclose",
    "price_col_requested": "adjclose",
    "price_col_used": "adjclose",
    "regime_params": {
      "min_samples": 252,
      "rv_pctl_max": 0.6
    },
    "rows": 4192,
    "run_ts_utc": "2026-02-20T11:59:23Z",
    "script_fingerprint": "tw0050_bb60_k2_forwardmdd20@2026-02-20.v7",
    "start": "2003-01-01",
    "ticker": "0050.TW",
    "trend_params": {
      "trend_ma_days": 200,
      "trend_slope_days": 20,
      "trend_slope_thr_pct": 0.5
    },
    "twse_fallback_policy": {
      "max_retries": 3,
      "months_back": 6,
      "sleep_jitter_sec": 0.5,
      "sleep_sec": 1.0,
      "timeout_sec": 20
    },
    "tz": "Asia/Taipei",
    "vol_params": {
      "atr_days": 14,
      "rv_days": 20
    }
  },
  "regime": {
    "allowed": false,
    "definition": "TREND_UP & RV20_percentile<=pctl_max & rv_hist_n>=min_samples => RISK_ON_ALLOWED",
    "inputs": {
      "bb_state": "EXTREME_UPPER_BAND",
      "rv_ann": 0.20695660038766792,
      "rv_ann_pctl": 79.8418024928092,
      "rv_hist_n": 4172,
      "trend_state": "TREND_UP"
    },
    "params": {
      "min_samples": 252,
      "rv_pctl_max": 60.0,
      "trend_required": "TREND_UP"
    },
    "passes": {
      "rv_hist_ok": true,
      "rv_ok": false,
      "trend_ok": true
    },
    "reasons": [
      "bb_extreme_upper_band_stretched"
    ],
    "tag": "RISK_OFF_OR_DEFENSIVE"
  },
  "trend": {
    "price_vs_trend_ma_pct": 37.689147063234515,
    "state": "TREND_UP",
    "trend_ma_days": 200,
    "trend_ma_last": 56.06832389831543,
    "trend_slope_days": 20,
    "trend_slope_pct": 6.133171071143373,
    "trend_slope_thr_pct": 0.5
  },
  "vol": {
    "rv_ann": 0.20695660038766792,
    "rv_ann_pctl": 79.8418024928092,
    "rv_days": 20,
    "rv_hist_n": 4172,
    "rv_hist_q20": 0.1119945633769759,
    "rv_hist_q50": 0.1482961886112939,
    "rv_hist_q80": 0.20796018111064132
  }
}