{
  "atr": {
    "atr": 1.2304300879000425,
    "atr_days": 14,
    "atr_pct": 1.5938214203880987,
    "tr_mode": "OHLC"
  },
  "dq": {
    "flags": [
      "PRICE_SERIES_BREAK_DETECTED",
      "FWD_MDD_CLEAN_APPLIED",
      "FWD_MDD_OUTLIER_MIN_RAW_20D",
      "RAW_OUTLIER_EXCLUDED_BY_CLEAN"
    ],
    "notes": [
      "Detected 1 break(s) by ratio thresholds; sample: 2014-01-02(r=0.249); hi=1.8, lo=0.555556.",
      "Computed forward_mdd_clean by excluding windows impacted by detected breaks (no price adjustment).",
      "forward_mdd_raw_20D min=-0.7628 < threshold(-0.4); see raw min_audit_trail.",
      "Primary forward_mdd uses CLEAN; raw outlier windows excluded by break mask."
    ]
  },
  "forward_mdd": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_20D",
    "min": -0.25570036172784616,
    "min_entry_date": "2020-02-19",
    "min_entry_price": 19.417919158935547,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452750205993652,
    "n": 4152,
    "p05": -0.09277689555882387,
    "p10": -0.06866817612545348,
    "p25": -0.04021713320743092,
    "p50": -0.018267256157202538
  },
  "forward_mdd10": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_10D",
    "min": -0.24002235180146836,
    "min_entry_date": "2020-03-05",
    "min_entry_price": 19.017335891723633,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452750205993652,
    "n": 4172,
    "p05": -0.06312489997354154,
    "p10": -0.047979633543583144,
    "p25": -0.02710276496144609,
    "p50": -0.011385336225375908
  },
  "forward_mdd10_clean": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_10D",
    "min": -0.24002235180146836,
    "min_entry_date": "2020-03-05",
    "min_entry_price": 19.017335891723633,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452750205993652,
    "n": 4172,
    "p05": -0.06312489997354154,
    "p10": -0.047979633543583144,
    "p25": -0.02710276496144609,
    "p50": -0.011385336225375908
  },
  "forward_mdd10_raw": {
    "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
    "label": "forward_mdd_raw_10D",
    "min": -0.7553146339000594,
    "min_entry_date": "2013-12-30",
    "min_entry_price": 37.47615051269531,
    "min_future_date": "2014-01-09",
    "min_future_price": 9.169865608215332,
    "n": 4182,
    "p05": -0.064219521975897,
    "p10": -0.04832369063139745,
    "p25": -0.027281315277046025,
    "p50": -0.011424260804714703
  },
  "forward_mdd_clean": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_clean_20D",
    "min": -0.25570036172784616,
    "min_entry_date": "2020-02-19",
    "min_entry_price": 19.417919158935547,
    "min_future_date": "2020-03-19",
    "min_future_price": 14.452750205993652,
    "n": 4152,
    "p05": -0.09277689555882387,
    "p10": -0.06866817612545348,
    "p25": -0.04021713320743092,
    "p50": -0.018267256157202538
  },
  "forward_mdd_conditional": {
    "10D": {
      "clean": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.24002235180146836,
          "min_entry_date": "2020-03-05",
          "min_entry_price": 19.017335891723633,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 2641,
          "p05": -0.05945742526631326,
          "p10": -0.04682272694273382,
          "p25": -0.02720503069082203,
          "p50": -0.011711973642788642
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22410860180899939,
          "min_entry_date": "2020-03-06",
          "min_entry_price": 18.62728500366211,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.07850321819743715,
          "p10": -0.060743897518513515,
          "p25": -0.042637187258571574,
          "p50": -0.018078129967291856
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.10085804450048286,
          "min_entry_date": "2009-06-03",
          "min_entry_price": 29.75843048095703,
          "min_future_date": "2009-06-17",
          "min_future_price": 26.75705337524414,
          "n": 656,
          "p05": -0.05672449865392992,
          "p10": -0.038834462560713545,
          "p25": -0.023178097484772814,
          "p50": -0.00950306975002313
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.11262799677291846,
          "min_entry_date": "2024-07-11",
          "min_entry_price": 48.706790924072266,
          "min_future_date": "2024-07-26",
          "min_future_price": 43.22104263305664,
          "n": 406,
          "p05": -0.049874740141005375,
          "p10": -0.03156564787747085,
          "p25": -0.018265408278617862,
          "p50": -0.008158757587622356
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.20567794193801325,
          "min_entry_date": "2020-03-10",
          "min_entry_price": 18.19507598876953,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11239978350100738,
          "p10": -0.07206387222471484,
          "p25": -0.04362677031163742,
          "p50": -0.02217738266880387
        }
      },
      "primary": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.24002235180146836,
          "min_entry_date": "2020-03-05",
          "min_entry_price": 19.017335891723633,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 2641,
          "p05": -0.05945742526631326,
          "p10": -0.04682272694273382,
          "p25": -0.02720503069082203,
          "p50": -0.011711973642788642
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22410860180899939,
          "min_entry_date": "2020-03-06",
          "min_entry_price": 18.62728500366211,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.07850321819743715,
          "p10": -0.060743897518513515,
          "p25": -0.042637187258571574,
          "p50": -0.018078129967291856
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.10085804450048286,
          "min_entry_date": "2009-06-03",
          "min_entry_price": 29.75843048095703,
          "min_future_date": "2009-06-17",
          "min_future_price": 26.75705337524414,
          "n": 656,
          "p05": -0.05672449865392992,
          "p10": -0.038834462560713545,
          "p25": -0.023178097484772814,
          "p50": -0.00950306975002313
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.11262799677291846,
          "min_entry_date": "2024-07-11",
          "min_entry_price": 48.706790924072266,
          "min_future_date": "2024-07-26",
          "min_future_price": 43.22104263305664,
          "n": 406,
          "p05": -0.049874740141005375,
          "p10": -0.03156564787747085,
          "p25": -0.018265408278617862,
          "p50": -0.008158757587622356
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.20567794193801325,
          "min_entry_date": "2020-03-10",
          "min_entry_price": 18.19507598876953,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11239978350100738,
          "p10": -0.07206387222471484,
          "p25": -0.04362677031163742,
          "p50": -0.02217738266880387
        }
      },
      "raw": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.7512963996812555,
          "min_entry_date": "2013-12-25",
          "min_entry_price": 36.87065887451172,
          "min_future_date": "2014-01-09",
          "min_future_price": 9.169865608215332,
          "n": 2648,
          "p05": -0.06000693575572223,
          "p10": -0.047126200301263355,
          "p25": -0.027371159162443648,
          "p50": -0.011748774798541362
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22410860180899939,
          "min_entry_date": "2020-03-06",
          "min_entry_price": 18.62728500366211,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.07850321819743715,
          "p10": -0.060743897518513515,
          "p25": -0.042637187258571574,
          "p50": -0.018078129967291856
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.7532160980094877,
          "min_entry_date": "2013-12-27",
          "min_entry_price": 37.157470703125,
          "min_future_date": "2014-01-09",
          "min_future_price": 9.169865608215332,
          "n": 657,
          "p05": -0.05674870128369569,
          "p10": -0.03912512293836392,
          "p25": -0.02318632048077185,
          "p50": -0.009523686306927681
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.7553146339000594,
          "min_entry_date": "2013-12-30",
          "min_entry_price": 37.47615051269531,
          "min_future_date": "2014-01-09",
          "min_future_price": 9.169865608215332,
          "n": 408,
          "p05": -0.05154119955856576,
          "p10": -0.03231483491137464,
          "p25": -0.018411446012141425,
          "p50": -0.008248442741517148
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.20567794193801325,
          "min_entry_date": "2020-03-10",
          "min_entry_price": 18.19507598876953,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11239978350100738,
          "p10": -0.07206387222471484,
          "p25": -0.04362677031163742,
          "p50": -0.02217738266880387
        }
      }
    },
    "20D": {
      "clean": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.25570036172784616,
          "min_entry_date": "2020-02-19",
          "min_entry_price": 19.417919158935547,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 2632,
          "p05": -0.09131059787073458,
          "p10": -0.06788426427296106,
          "p25": -0.040612900688131975,
          "p50": -0.018278863755204766
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22673433120826714,
          "min_entry_date": "2020-02-27",
          "min_entry_price": 18.690536499023438,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11368865813529297,
          "p10": -0.08656354402823342,
          "p25": -0.05125197698242001,
          "p50": -0.021372255089519454
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.19354845182009028,
          "min_entry_date": "2024-07-16",
          "min_entry_price": 47.53107452392578,
          "min_future_date": "2024-08-05",
          "min_future_price": 38.33150863647461,
          "n": 655,
          "p05": -0.07353563055991234,
          "p10": -0.060014211316192514,
          "p25": -0.03577914942913757,
          "p50": -0.016803644423231345
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.21301510714946115,
          "min_entry_date": "2024-07-11",
          "min_entry_price": 48.706790924072266,
          "min_future_date": "2024-08-05",
          "min_future_price": 38.33150863647461,
          "n": 396,
          "p05": -0.06661067096498557,
          "p10": -0.05024368001562396,
          "p25": -0.028232645549961993,
          "p50": -0.012328026107305157
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.21522607162490615,
          "min_entry_date": "2020-03-02",
          "min_entry_price": 18.41645050048828,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.1902072126813356,
          "p10": -0.12653779947505764,
          "p25": -0.06141731248450377,
          "p50": -0.03292895700990417
        }
      },
      "primary": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.25570036172784616,
          "min_entry_date": "2020-02-19",
          "min_entry_price": 19.417919158935547,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 2632,
          "p05": -0.09131059787073458,
          "p10": -0.06788426427296106,
          "p25": -0.040612900688131975,
          "p50": -0.018278863755204766
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22673433120826714,
          "min_entry_date": "2020-02-27",
          "min_entry_price": 18.690536499023438,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11368865813529297,
          "p10": -0.08656354402823342,
          "p25": -0.05125197698242001,
          "p50": -0.021372255089519454
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.19354845182009028,
          "min_entry_date": "2024-07-16",
          "min_entry_price": 47.53107452392578,
          "min_future_date": "2024-08-05",
          "min_future_price": 38.33150863647461,
          "n": 655,
          "p05": -0.07353563055991234,
          "p10": -0.060014211316192514,
          "p25": -0.03577914942913757,
          "p50": -0.016803644423231345
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.21301510714946115,
          "min_entry_date": "2024-07-11",
          "min_entry_price": 48.706790924072266,
          "min_future_date": "2024-08-05",
          "min_future_price": 38.33150863647461,
          "n": 396,
          "p05": -0.06661067096498557,
          "p10": -0.05024368001562396,
          "p25": -0.028232645549961993,
          "p50": -0.012328026107305157
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.21522607162490615,
          "min_entry_date": "2020-03-02",
          "min_entry_price": 18.41645050048828,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.1902072126813356,
          "p10": -0.12653779947505764,
          "p25": -0.06141731248450377,
          "p50": -0.03292895700990417
        }
      },
      "raw": {
        "-1.5_to_1.5": {
          "bucket_id": "-1.5_to_1.5",
          "bucket_label": "-1.5<bb_z<1.5",
          "min": -0.7512963996812555,
          "min_entry_date": "2013-12-23",
          "min_entry_price": 36.87065887451172,
          "min_future_date": "2014-01-09",
          "min_future_price": 9.169865608215332,
          "n": 2648,
          "p05": -0.09332960734490041,
          "p10": -0.06971714919970248,
          "p25": -0.04116206055917415,
          "p50": -0.01862187790585379
        },
        "-2.0_to_-1.5": {
          "bucket_id": "-2.0_to_-1.5",
          "bucket_label": "-2.0<bb_z<=-1.5",
          "min": -0.22673433120826714,
          "min_entry_date": "2020-02-27",
          "min_entry_price": 18.690536499023438,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.11368865813529297,
          "p10": -0.08656354402823342,
          "p25": -0.05125197698242001,
          "p50": -0.021372255089519454
        },
        "1.5_to_2.0": {
          "bucket_id": "1.5_to_2.0",
          "bucket_label": "1.5<=bb_z<2.0",
          "min": -0.7532160980094877,
          "min_entry_date": "2013-12-27",
          "min_entry_price": 37.157470703125,
          "min_future_date": "2014-01-09",
          "min_future_price": 9.169865608215332,
          "n": 657,
          "p05": -0.07484661144960555,
          "p10": -0.06075332291736836,
          "p25": -0.03582714095909101,
          "p50": -0.017003839188882264
        },
        "z_ge_2.0": {
          "bucket_id": "z_ge_2.0",
          "bucket_label": "bb_z>=2.0",
          "min": -0.762755177344641,
          "min_entry_date": "2013-12-30",
          "min_entry_price": 37.47615051269531,
          "min_future_date": "2014-02-05",
          "min_future_price": 8.891022682189941,
          "n": 398,
          "p05": -0.06730437275795803,
          "p10": -0.05040135682881245,
          "p25": -0.02883962686609129,
          "p50": -0.012370991414463017
        },
        "z_le_-2.0": {
          "bucket_id": "z_le_-2.0",
          "bucket_label": "bb_z<=-2.0",
          "min": -0.21522607162490615,
          "min_entry_date": "2020-03-02",
          "min_entry_price": 18.41645050048828,
          "min_future_date": "2020-03-19",
          "min_future_price": 14.452750205993652,
          "n": 205,
          "p05": -0.1902072126813356,
          "p10": -0.12653779947505764,
          "p25": -0.06141731248450377,
          "p50": -0.03292895700990417
        }
      }
    },
    "meta": {
      "forward_mode_primary": "clean",
      "note": "condition evaluated at entry t using bb_z[t]; stats computed on already-produced forward_mdd arrays (respecting raw/clean masks).",
      "scheme": "bb_z_5bucket_v1",
      "thresholds": {
        "extreme": 2.0,
        "near": 1.5
      }
    }
  },
  "forward_mdd_raw": {
    "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
    "label": "forward_mdd_raw_20D",
    "min": -0.762755177344641,
    "min_entry_date": "2013-12-30",
    "min_entry_price": 37.47615051269531,
    "min_future_date": "2014-02-05",
    "min_future_price": 8.891022682189941,
    "n": 4172,
    "p05": -0.09523587346281523,
    "p10": -0.07015343390039415,
    "p25": -0.04078515895468199,
    "p50": -0.018457956851521684
  },
  "latest": {
    "adjclose": 77.19999694824219,
    "band_width_geo_pct": 37.608693721825894,
    "band_width_std_pct": 31.655991313057992,
    "bb_lower": 55.893853230103325,
    "bb_ma": 66.40432726542154,
    "bb_pos": 1.0,
    "bb_pos_raw": 1.0135672114570704,
    "bb_sd": 5.25523701765911,
    "bb_upper": 76.91480130073977,
    "bb_z": 2.0542688458282825,
    "close": 77.19999694824219,
    "date": "2026-02-11",
    "dist_to_lower_pct": 27.598632850236136,
    "dist_to_upper_pct": -0.3694244284667855,
    "price_used": 77.19999694824219,
    "state": "EXTREME_UPPER_BAND"
  },
  "meta": {
    "bb_k": 2.0,
    "bb_window": 60,
    "break_detection": {
      "break_count": 1,
      "break_ratio_hi": 1.8,
      "break_ratio_lo": 0.5555555555555556,
      "forward_mode_primary": "clean"
    },
    "data_source": "yfinance_yahoo_or_twse_fallback",
    "fetch_start_effective": "2003-01-01",
    "fwd_days": 20,
    "fwd_days_short": 10,
    "last_date": "2026-02-11",
    "module": "tw0050_bb",
    "price_calc": "adjclose",
    "price_col_requested": "adjclose",
    "price_col_used": "adjclose",
    "regime_params": {
      "min_samples": 252,
      "rv_pctl_max": 0.6
    },
    "reliability": "HIGH",
    "reliability_reason": [
      "yfinance_adjclose_ok"
    ],
    "rows": 4192,
    "run_ts_utc": "2026-02-21T04:48:15Z",
    "script_fingerprint": "tw0050_bb60_k2_forwardmdd20@2026-02-21.v11.condfwd_additive",
    "shortcircuit": {
      "enabled": true,
      "skipped_compute_when_unadjusted": true,
      "unadjusted_price_mode": false
    },
    "start": "2003-01-01",
    "ticker": "0050.TW",
    "trend_params": {
      "trend_ma_days": 200,
      "trend_slope_days": 20,
      "trend_slope_thr_pct": 0.5
    },
    "twse_fallback_policy": {
      "max_retries": 3,
      "months_back_effective": null,
      "months_back_requested": 2,
      "months_back_unadjusted_cap": 2,
      "sleep_jitter_sec": 0.5,
      "sleep_sec": 1.0,
      "timeout_sec": 20
    },
    "tz": "Asia/Taipei",
    "vol_params": {
      "atr_days": 14,
      "rv_days": 20
    }
  },
  "pledge": {
    "decision": {
      "action_bucket": "VETO",
      "pledge_policy": "DISALLOW",
      "veto_reasons": [
        "regime_gate_closed",
        "no_chase_state:EXTREME_UPPER_BAND",
        "no_chase_z>= 1.50"
      ]
    },
    "inputs": {
      "bb_state": "EXTREME_UPPER_BAND",
      "bb_z": 2.0542688458282825,
      "forward_mode_primary": "clean",
      "regime_allowed": false
    },
    "scope": "compute_only_no_margin_no_chip",
    "thresholds": {
      "accumulate_z_threshold": -1.5,
      "no_chase_z_threshold": 1.5,
      "require_regime_allowed": true
    },
    "unconditional_tranche_levels": {
      "levels": [
        {
          "drawdown": -0.047979633543583144,
          "label": "10D_p10_uncond",
          "price_level": 73.49596938509978
        },
        {
          "drawdown": -0.06312489997354154,
          "label": "10D_p05_uncond",
          "price_level": 72.32675486292669
        },
        {
          "drawdown": -0.06866817612545348,
          "label": "20D_p10_uncond",
          "price_level": 71.89881396091582
        },
        {
          "drawdown": -0.09277689555882387,
          "label": "20D_p05_uncond",
          "price_level": 70.0376208942336
        }
      ],
      "note": "levels derived from unconditional forward_mdd quantiles; not conditioned on current state",
      "price_anchor": 77.19999694824219
    },
    "version": "pledge_guidance_v1"
  },
  "regime": {
    "allowed": false,
    "definition": "TREND_UP & RV20_percentile<=pctl_max & rv_hist_n>=min_samples => RISK_ON_ALLOWED",
    "inputs": {
      "bb_state": "EXTREME_UPPER_BAND",
      "rv_ann": 0.20695660038766722,
      "rv_ann_pctl": 79.8418024928092,
      "rv_hist_n": 4172,
      "trend_state": "TREND_UP"
    },
    "params": {
      "min_samples": 252,
      "rv_pctl_max": 60.0,
      "trend_required": "TREND_UP"
    },
    "passes": {
      "rv_hist_ok": true,
      "rv_ok": false,
      "trend_ok": true
    },
    "reasons": [
      "bb_extreme_upper_band_stretched"
    ],
    "tag": "RISK_OFF_OR_DEFENSIVE"
  },
  "trend": {
    "price_vs_trend_ma_pct": 37.689147063234515,
    "state": "TREND_UP",
    "trend_ma_days": 200,
    "trend_ma_last": 56.06832389831543,
    "trend_slope_days": 20,
    "trend_slope_pct": 6.133171071143373,
    "trend_slope_thr_pct": 0.5
  },
  "vol": {
    "rv_ann": 0.20695660038766722,
    "rv_ann_pctl": 79.8418024928092,
    "rv_days": 20,
    "rv_hist_n": 4172,
    "rv_hist_q20": 0.1119936898424664,
    "rv_hist_q50": 0.1482963063381441,
    "rv_hist_q80": 0.20796019145767922
  }
}