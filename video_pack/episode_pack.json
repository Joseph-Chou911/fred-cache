{
  "schema_version": "episode_pack_schema_v1",
  "build_fingerprint": "build_video_pack@v1.2.rich_outline_more_extracts",
  "generated_at_utc": "2026-02-27T12:08:13Z",
  "generated_at_local": "2026-02-27T12:08:13.502035+00:00",
  "timezone": "Asia/Taipei",
  "day_key_local": "2026-02-27",
  "inputs": {
    "tw0050_bb": {
      "path": "tw0050_bb_cache/stats_latest.json",
      "as_of_date": "2026-02-26",
      "age_days": 1,
      "dq_flags": [
        "PRICE_SERIES_BREAK_DETECTED",
        "FWD_MDD_CLEAN_APPLIED",
        "FWD_MDD_OUTLIER_MIN_RAW_20D",
        "RAW_OUTLIER_EXCLUDED_BY_CLEAN"
      ],
      "fingerprint": "tw0050_bb60_k2_forwardmdd20@2026-02-21.v12.adjclose_audit",
      "picked_as_of_path": "meta.last_date"
    },
    "roll25": {
      "path": "roll25_cache/stats_latest.json",
      "as_of_date": "2026-02-26",
      "age_days": 1,
      "dq_flags": [],
      "fingerprint": "twse_stats_v1",
      "picked_as_of_path": "used_date"
    },
    "taiwan_margin": {
      "path": "taiwan_margin_cache/latest.json",
      "as_of_date": "2026-02-26",
      "age_days": 1,
      "dq_flags": [],
      "fingerprint": "taiwan_margin_financing_latest_v1",
      "picked_as_of_path": "series.TWSE.data_date"
    }
  },
  "warnings": [],
  "extracts_best_effort": {
    "tw0050_bb": [
      {
        "field": "last_date",
        "value": "2026-02-26",
        "picked_from": [
          "meta.last_date",
          "latest.date"
        ]
      },
      {
        "field": "adjclose",
        "value": 81.1500015258789,
        "picked_from": [
          "latest.adjclose",
          "latest.price_used"
        ]
      },
      {
        "field": "bb_z",
        "value": 2.2710145565515196,
        "picked_from": [
          "latest.bb_z"
        ]
      },
      {
        "field": "bb_state",
        "value": "EXTREME_UPPER_BAND",
        "picked_from": [
          "latest.state"
        ]
      },
      {
        "field": "regime_allowed",
        "value": false,
        "picked_from": [
          "regime.allowed"
        ]
      },
      {
        "field": "pledge_action_bucket",
        "value": "VETO",
        "picked_from": [
          "pledge.decision.action_bucket"
        ]
      },
      {
        "field": "trend_state",
        "value": "TREND_UP",
        "picked_from": [
          "trend.state"
        ]
      },
      {
        "field": "price_vs_200ma_pct",
        "value": 42.78204169364075,
        "picked_from": [
          "trend.price_vs_trend_ma_pct"
        ]
      },
      {
        "field": "rv_ann_pctl",
        "value": 82.71072796934867,
        "picked_from": [
          "vol.rv_ann_pctl"
        ]
      },
      {
        "field": "veto_reasons",
        "value": [
          "regime_gate_closed",
          "no_chase_state:EXTREME_UPPER_BAND",
          "no_chase_z>= 1.50"
        ],
        "picked_from": [
          "pledge.decision.veto_reasons"
        ]
      },
      {
        "field": "tranche_levels",
        "value": "10D_p10_uncond=77.26, 10D_p05_uncond=76.03, 20D_p10_uncond=75.58, 20D_p05_uncond=73.63",
        "picked_from": [
          "pledge.unconditional_tranche_levels.levels[:6].(label,price_level)"
        ]
      }
    ],
    "roll25": [
      {
        "field": "mode",
        "value": "FULL",
        "picked_from": [
          "mode"
        ]
      },
      {
        "field": "used_date",
        "value": "2026-02-26",
        "picked_from": [
          "used_date"
        ]
      },
      {
        "field": "trade_value_win60_z",
        "value": 3.009013,
        "picked_from": [
          "series.trade_value.win60.z"
        ]
      },
      {
        "field": "trade_value_win60_p",
        "value": 99.167,
        "picked_from": [
          "series.trade_value.win60.p"
        ]
      },
      {
        "field": "trade_value_win252_z",
        "value": 4.352935,
        "picked_from": [
          "series.trade_value.win252.z"
        ]
      },
      {
        "field": "trade_value_win252_p",
        "value": 99.802,
        "picked_from": [
          "series.trade_value.win252.p"
        ]
      },
      {
        "field": "close_win60_z",
        "value": 2.307043,
        "picked_from": [
          "series.close.win60.z"
        ]
      },
      {
        "field": "close_win60_p",
        "value": 99.167,
        "picked_from": [
          "series.close.win60.p"
        ]
      },
      {
        "field": "close_win252_z",
        "value": 2.774885,
        "picked_from": [
          "series.close.win252.z"
        ]
      },
      {
        "field": "close_win252_p",
        "value": 99.802,
        "picked_from": [
          "series.close.win252.p"
        ]
      },
      {
        "field": "vol_multiplier_20",
        "value": 1.451967,
        "picked_from": [
          "derived.vol_multiplier_20"
        ]
      },
      {
        "field": "volume_amplified",
        "value": false,
        "picked_from": [
          "derived.volume_amplified"
        ]
      }
    ],
    "margin": [
      {
        "field": "twse_data_date",
        "value": "2026-02-26",
        "picked_from": [
          "series.TWSE.data_date"
        ]
      },
      {
        "field": "twse_balance_yi",
        "value": 3898.6,
        "picked_from": [
          "series.TWSE.rows.0.balance_yi"
        ]
      },
      {
        "field": "twse_chg_yi",
        "value": 67.3,
        "picked_from": [
          "series.TWSE.rows.0.chg_yi"
        ]
      },
      {
        "field": "tpex_data_date",
        "value": "2026-02-26",
        "picked_from": [
          "series.TPEX.data_date"
        ]
      },
      {
        "field": "tpex_balance_yi",
        "value": 1378.5,
        "picked_from": [
          "series.TPEX.rows.0.balance_yi"
        ]
      },
      {
        "field": "tpex_chg_yi",
        "value": 30.0,
        "picked_from": [
          "series.TPEX.rows.0.chg_yi"
        ]
      },
      {
        "field": "total_balance_yi",
        "value": 5277.1,
        "picked_from": [
          "series.TWSE.rows.0.balance_yi + series.TPEX.rows.0.balance_yi"
        ]
      },
      {
        "field": "total_chg_yi",
        "value": 97.3,
        "picked_from": [
          "series.TWSE.rows.0.chg_yi + series.TPEX.rows.0.chg_yi"
        ]
      },
      {
        "field": "twse_chg_3d_sum_yi",
        "value": 177.0,
        "picked_from": [
          "sum(series.TWSE.rows[:3].chg_yi)"
        ]
      },
      {
        "field": "twse_balance_is_30row_high",
        "value": true,
        "picked_from": [
          "latest == max(series.TWSE.rows[:].balance_yi)"
        ]
      },
      {
        "field": "tpex_chg_3d_sum_yi",
        "value": 56.3,
        "picked_from": [
          "sum(series.TPEX.rows[:3].chg_yi)"
        ]
      },
      {
        "field": "tpex_balance_is_30row_high",
        "value": true,
        "picked_from": [
          "latest == max(series.TPEX.rows[:].balance_yi)"
        ]
      },
      {
        "field": "total_chg_3d_sum_yi",
        "value": 233.3,
        "picked_from": [
          "twse_chg_3d_sum_yi + tpex_chg_3d_sum_yi"
        ]
      }
    ]
  },
  "raw": {
    "tw0050_bb": {
      "atr": {
        "atr": 1.3340290309878469,
        "atr_days": 14,
        "atr_pct": 1.6439051212616702,
        "tr_mode": "OHLC"
      },
      "dq": {
        "flags": [
          "PRICE_SERIES_BREAK_DETECTED",
          "FWD_MDD_CLEAN_APPLIED",
          "FWD_MDD_OUTLIER_MIN_RAW_20D",
          "RAW_OUTLIER_EXCLUDED_BY_CLEAN"
        ],
        "notes": [
          "Detected 1 break(s) by ratio thresholds; sample: 2014-01-02(r=0.249); hi=1.8, lo=0.555556.",
          "Computed forward_mdd_clean by excluding windows impacted by detected breaks (no price adjustment).",
          "forward_mdd_raw_20D min=-0.7628 < threshold(-0.4); see raw min_audit_trail.",
          "Primary forward_mdd uses CLEAN; raw outlier windows excluded by break mask."
        ]
      },
      "forward_mdd": {
        "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
        "label": "forward_mdd_clean_20D",
        "min": -0.2557003366113709,
        "min_entry_date": "2020-02-19",
        "min_entry_price": 19.41792106628418,
        "min_future_date": "2020-03-19",
        "min_future_price": 14.452752113342285,
        "n": 4156,
        "p05": -0.09272268273151263,
        "p10": -0.06866427606759168,
        "p25": -0.04019127565492106,
        "p50": -0.01823441980851337
      },
      "forward_mdd10": {
        "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
        "label": "forward_mdd_clean_10D",
        "min": -0.24002209906184802,
        "min_entry_date": "2020-03-05",
        "min_entry_price": 19.017332077026367,
        "min_future_date": "2020-03-19",
        "min_future_price": 14.452752113342285,
        "n": 4176,
        "p05": -0.06308016565735114,
        "p10": -0.04797968897501359,
        "p25": -0.027102722894395664,
        "p50": -0.011387948268976378
      },
      "forward_mdd10_clean": {
        "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
        "label": "forward_mdd_clean_10D",
        "min": -0.24002209906184802,
        "min_entry_date": "2020-03-05",
        "min_entry_price": 19.017332077026367,
        "min_future_date": "2020-03-19",
        "min_future_price": 14.452752113342285,
        "n": 4176,
        "p05": -0.06308016565735114,
        "p10": -0.04797968897501359,
        "p25": -0.027102722894395664,
        "p50": -0.011387948268976378
      },
      "forward_mdd10_raw": {
        "definition": "min(price[t+1..t+10]/price[t]-1), level-price based",
        "label": "forward_mdd_raw_10D",
        "min": -0.7553146095345081,
        "min_entry_date": "2013-12-30",
        "min_entry_price": 37.47614288330078,
        "min_future_date": "2014-01-09",
        "min_future_price": 9.169864654541016,
        "n": 4186,
        "p05": -0.06421693265332917,
        "p10": -0.048318888439562446,
        "p25": -0.027281315277046025,
        "p50": -0.011434006270313435
      },
      "forward_mdd_clean": {
        "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
        "label": "forward_mdd_clean_20D",
        "min": -0.2557003366113709,
        "min_entry_date": "2020-02-19",
        "min_entry_price": 19.41792106628418,
        "min_future_date": "2020-03-19",
        "min_future_price": 14.452752113342285,
        "n": 4156,
        "p05": -0.09272268273151263,
        "p10": -0.06866427606759168,
        "p25": -0.04019127565492106,
        "p50": -0.01823441980851337
      },
      "forward_mdd_conditional": {
        "10D": {
          "clean": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.24002209906184802,
              "min_entry_date": "2020-03-05",
              "min_entry_price": 19.017332077026367,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 2642,
              "p05": -0.05945711138690849,
              "p10": -0.046813518025505846,
              "p25": -0.02718356350573492,
              "p50": -0.011708174280136818
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22410865830901783,
              "min_entry_date": "2020-03-06",
              "min_entry_price": 18.627288818359375,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.0785032359857291,
              "p10": -0.06074397826116912,
              "p25": -0.04263719303503166,
              "p50": -0.018078011282363304
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.10085799979938448,
              "min_entry_date": "2009-06-03",
              "min_entry_price": 29.758424758911133,
              "min_future_date": "2009-06-17",
              "min_future_price": 26.757049560546875,
              "n": 658,
              "p05": -0.05672439927351658,
              "p10": -0.03878084412149738,
              "p25": -0.02314946379055749,
              "p50": -0.009544451709737611
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.11262814459116144,
              "min_entry_date": "2024-07-11",
              "min_entry_price": 48.70679473876953,
              "min_future_date": "2024-07-26",
              "min_future_price": 43.221038818359375,
              "n": 407,
              "p05": -0.04977153767526758,
              "p10": -0.03155607965333056,
              "p25": -0.018344404269992953,
              "p50": -0.008225136424705348
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.20567800364423072,
              "min_entry_date": "2020-03-10",
              "min_entry_price": 18.195079803466797,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.11239987087581002,
              "p10": -0.07206380278031653,
              "p25": -0.043626946049100224,
              "p50": -0.022177521043505788
            }
          },
          "primary": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.24002209906184802,
              "min_entry_date": "2020-03-05",
              "min_entry_price": 19.017332077026367,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 2642,
              "p05": -0.05945711138690849,
              "p10": -0.046813518025505846,
              "p25": -0.02718356350573492,
              "p50": -0.011708174280136818
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22410865830901783,
              "min_entry_date": "2020-03-06",
              "min_entry_price": 18.627288818359375,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.0785032359857291,
              "p10": -0.06074397826116912,
              "p25": -0.04263719303503166,
              "p50": -0.018078011282363304
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.10085799979938448,
              "min_entry_date": "2009-06-03",
              "min_entry_price": 29.758424758911133,
              "min_future_date": "2009-06-17",
              "min_future_price": 26.757049560546875,
              "n": 658,
              "p05": -0.05672439927351658,
              "p10": -0.03878084412149738,
              "p25": -0.02314946379055749,
              "p50": -0.009544451709737611
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.11262814459116144,
              "min_entry_date": "2024-07-11",
              "min_entry_price": 48.70679473876953,
              "min_future_date": "2024-07-26",
              "min_future_price": 43.221038818359375,
              "n": 407,
              "p05": -0.04977153767526758,
              "p10": -0.03155607965333056,
              "p25": -0.018344404269992953,
              "p50": -0.008225136424705348
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.20567800364423072,
              "min_entry_date": "2020-03-10",
              "min_entry_price": 18.195079803466797,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.11239987087581002,
              "p10": -0.07206380278031653,
              "p25": -0.043626946049100224,
              "p50": -0.022177521043505788
            }
          },
          "raw": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.7512964770091825,
              "min_entry_date": "2013-12-25",
              "min_entry_price": 36.87066650390625,
              "min_future_date": "2014-01-09",
              "min_future_price": 9.169864654541016,
              "n": 2649,
              "p05": -0.06000498515928805,
              "p10": -0.047119770442112775,
              "p25": -0.027370756434131116,
              "p50": -0.011732674039198754
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22410865830901783,
              "min_entry_date": "2020-03-06",
              "min_entry_price": 18.627288818359375,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.0785032359857291,
              "p10": -0.06074397826116912,
              "p25": -0.04263719303503166,
              "p50": -0.018078011282363304
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.7532160730040821,
              "min_entry_date": "2013-12-27",
              "min_entry_price": 37.15746307373047,
              "min_future_date": "2014-01-09",
              "min_future_price": 9.169864654541016,
              "n": 659,
              "p05": -0.05673651108407699,
              "p10": -0.039047210449505765,
              "p25": -0.023180850168080247,
              "p50": -0.009565093895665733
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.7553146095345081,
              "min_entry_date": "2013-12-30",
              "min_entry_price": 37.47614288330078,
              "min_future_date": "2014-01-09",
              "min_future_price": 9.169864654541016,
              "n": 409,
              "p05": -0.05145517701508277,
              "p10": -0.0322602729186902,
              "p25": -0.018505252386323723,
              "p50": -0.008272431336252328
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.20567800364423072,
              "min_entry_date": "2020-03-10",
              "min_entry_price": 18.195079803466797,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.11239987087581002,
              "p10": -0.07206380278031653,
              "p25": -0.043626946049100224,
              "p50": -0.022177521043505788
            }
          }
        },
        "20D": {
          "clean": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.2557003366113709,
              "min_entry_date": "2020-02-19",
              "min_entry_price": 19.41792106628418,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 2632,
              "p05": -0.09131047664672959,
              "p10": -0.06788426475873925,
              "p25": -0.040613048873491875,
              "p50": -0.018278979792789363
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22673430807028105,
              "min_entry_date": "2020-02-27",
              "min_entry_price": 18.69053840637207,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1136887454421707,
              "p10": -0.08656348228042061,
              "p25": -0.05125198386352492,
              "p50": -0.021372850557253797
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.19354837156317828,
              "min_entry_date": "2024-07-16",
              "min_entry_price": 47.53107452392578,
              "min_future_date": "2024-08-05",
              "min_future_price": 38.331512451171875,
              "n": 655,
              "p05": -0.0735357005418096,
              "p10": -0.060014211316192514,
              "p25": -0.03577941710936816,
              "p50": -0.01680358374514035
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.2130150904662006,
              "min_entry_date": "2024-07-11",
              "min_entry_price": 48.70679473876953,
              "min_future_date": "2024-08-05",
              "min_future_price": 38.331512451171875,
              "n": 400,
              "p05": -0.06647386917410365,
              "p10": -0.05022313341002234,
              "p25": -0.02812841141459055,
              "p50": -0.011968806257064257
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.2152261306116311,
              "min_entry_date": "2020-03-02",
              "min_entry_price": 18.416454315185547,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1902072126813356,
              "p10": -0.1265378425564108,
              "p25": -0.061417071297710346,
              "p50": -0.032928853279338144
            }
          },
          "primary": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.2557003366113709,
              "min_entry_date": "2020-02-19",
              "min_entry_price": 19.41792106628418,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 2632,
              "p05": -0.09131047664672959,
              "p10": -0.06788426475873925,
              "p25": -0.040613048873491875,
              "p50": -0.018278979792789363
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22673430807028105,
              "min_entry_date": "2020-02-27",
              "min_entry_price": 18.69053840637207,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1136887454421707,
              "p10": -0.08656348228042061,
              "p25": -0.05125198386352492,
              "p50": -0.021372850557253797
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.19354837156317828,
              "min_entry_date": "2024-07-16",
              "min_entry_price": 47.53107452392578,
              "min_future_date": "2024-08-05",
              "min_future_price": 38.331512451171875,
              "n": 655,
              "p05": -0.0735357005418096,
              "p10": -0.060014211316192514,
              "p25": -0.03577941710936816,
              "p50": -0.01680358374514035
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.2130150904662006,
              "min_entry_date": "2024-07-11",
              "min_entry_price": 48.70679473876953,
              "min_future_date": "2024-08-05",
              "min_future_price": 38.331512451171875,
              "n": 400,
              "p05": -0.06647386917410365,
              "p10": -0.05022313341002234,
              "p25": -0.02812841141459055,
              "p50": -0.011968806257064257
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.2152261306116311,
              "min_entry_date": "2020-03-02",
              "min_entry_price": 18.416454315185547,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1902072126813356,
              "p10": -0.1265378425564108,
              "p25": -0.061417071297710346,
              "p50": -0.032928853279338144
            }
          },
          "raw": {
            "-1.5_to_1.5": {
              "bucket_id": "-1.5_to_1.5",
              "bucket_label": "-1.5<bb_z<1.5",
              "min": -0.7512964770091825,
              "min_entry_date": "2013-12-23",
              "min_entry_price": 36.87066650390625,
              "min_future_date": "2014-01-09",
              "min_future_price": 9.169864654541016,
              "n": 2648,
              "p05": -0.09332972055884112,
              "p10": -0.0697172667324926,
              "p25": -0.041162148800942044,
              "p50": -0.018621651868473865
            },
            "-2.0_to_-1.5": {
              "bucket_id": "-2.0_to_-1.5",
              "bucket_label": "-2.0<bb_z<=-1.5",
              "min": -0.22673430807028105,
              "min_entry_date": "2020-02-27",
              "min_entry_price": 18.69053840637207,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1136887454421707,
              "p10": -0.08656348228042061,
              "p25": -0.05125198386352492,
              "p50": -0.021372850557253797
            },
            "1.5_to_2.0": {
              "bucket_id": "1.5_to_2.0",
              "bucket_label": "1.5<=bb_z<2.0",
              "min": -0.7532160730040821,
              "min_entry_date": "2013-12-27",
              "min_entry_price": 37.15746307373047,
              "min_future_date": "2014-01-09",
              "min_future_price": 9.169864654541016,
              "n": 657,
              "p05": -0.07484667974899935,
              "p10": -0.06075349947417771,
              "p25": -0.03582722605716704,
              "p50": -0.01700402974694737
            },
            "z_ge_2.0": {
              "bucket_id": "z_ge_2.0",
              "bucket_label": "bb_z>=2.0",
              "min": -0.7627551035988268,
              "min_entry_date": "2013-12-30",
              "min_entry_price": 37.47614288330078,
              "min_future_date": "2014-02-05",
              "min_future_price": 8.891023635864258,
              "n": 402,
              "p05": -0.06728847195008063,
              "p10": -0.05037919222063734,
              "p25": -0.02841205205509012,
              "p50": -0.012163107771961057
            },
            "z_le_-2.0": {
              "bucket_id": "z_le_-2.0",
              "bucket_label": "bb_z<=-2.0",
              "min": -0.2152261306116311,
              "min_entry_date": "2020-03-02",
              "min_entry_price": 18.416454315185547,
              "min_future_date": "2020-03-19",
              "min_future_price": 14.452752113342285,
              "n": 205,
              "p05": -0.1902072126813356,
              "p10": -0.1265378425564108,
              "p25": -0.061417071297710346,
              "p50": -0.032928853279338144
            }
          }
        },
        "meta": {
          "forward_mode_primary": "clean",
          "note": "condition evaluated at entry t using bb_z[t]; stats computed on already-produced forward_mdd arrays (respecting raw/clean masks).",
          "scheme": "bb_z_5bucket_v1",
          "thresholds": {
            "extreme": 2.0,
            "near": 1.5
          }
        }
      },
      "forward_mdd_raw": {
        "definition": "min(price[t+1..t+20]/price[t]-1), level-price based",
        "label": "forward_mdd_raw_20D",
        "min": -0.7627551035988268,
        "min_entry_date": "2013-12-30",
        "min_entry_price": 37.47614288330078,
        "min_future_date": "2014-02-05",
        "min_future_price": 8.891023635864258,
        "n": 4176,
        "p05": -0.09522484884485705,
        "p10": -0.07012191669296697,
        "p25": -0.040753257590823794,
        "p50": -0.01841898840681866
      },
      "latest": {
        "adjclose": 81.1500015258789,
        "band_width_geo_pct": 42.22768704089657,
        "band_width_std_pct": 34.86611093616811,
        "bb_lower": 55.93127812560321,
        "bb_ma": 67.74052066802979,
        "bb_pos": 1.0,
        "bb_pos_raw": 1.0677536391378801,
        "bb_sd": 5.90462127121329,
        "bb_upper": 79.54976321045636,
        "bb_z": 2.2710145565515196,
        "close": 81.1500015258789,
        "date": "2026-02-26",
        "dist_to_lower_pct": 31.076676433867217,
        "dist_to_upper_pct": -1.971951060176166,
        "price_used": 81.1500015258789,
        "state": "EXTREME_UPPER_BAND"
      },
      "meta": {
        "adjclose_audit": {
          "available": true,
          "eps_rel": 1e-08,
          "max_abs_rel_diff": 0.3773087993254249,
          "n": 4196,
          "nonzero_count": 4177,
          "nonzero_frac": 0.9954718779790277,
          "p99_abs_rel_diff": 0.3773087284986858,
          "top_abs_rel_diff": [
            {
              "abs_rel_diff": 0.3773087993254249,
              "adjclose": 33.37624740600586,
              "close": 53.599998474121094,
              "date": "2010-08-26"
            },
            {
              "abs_rel_diff": 0.3773087993254249,
              "adjclose": 33.37624740600586,
              "close": 53.599998474121094,
              "date": "2010-03-12"
            },
            {
              "abs_rel_diff": 0.3773087993254249,
              "adjclose": 33.37624740600586,
              "close": 53.599998474121094,
              "date": "2011-09-05"
            }
          ]
        },
        "adjclose_audit_policy": {
          "eps_rel": 1e-08,
          "min_n": 252,
          "note": "Evidence-only; does not alter short-circuit rules. Use DQ flags/notes to interpret."
        },
        "bb_k": 2.0,
        "bb_window": 60,
        "break_detection": {
          "break_count": 1,
          "break_ratio_hi": 1.8,
          "break_ratio_lo": 0.5555555555555556,
          "forward_mode_primary": "clean"
        },
        "data_source": "yfinance_yahoo_or_twse_fallback",
        "fetch_start_effective": "2003-01-01",
        "fwd_days": 20,
        "fwd_days_short": 10,
        "last_date": "2026-02-26",
        "module": "tw0050_bb",
        "price_calc": "adjclose",
        "price_col_requested": "adjclose",
        "price_col_used": "adjclose",
        "regime_params": {
          "min_samples": 252,
          "rv_pctl_max": 0.6
        },
        "reliability": "HIGH",
        "reliability_reason": [
          "yfinance_adjclose_ok"
        ],
        "rows": 4196,
        "run_ts_utc": "2026-02-27T07:28:23Z",
        "script_fingerprint": "tw0050_bb60_k2_forwardmdd20@2026-02-21.v12.adjclose_audit",
        "shortcircuit": {
          "enabled": true,
          "skipped_compute_when_unadjusted": true,
          "unadjusted_price_mode": false
        },
        "start": "2003-01-01",
        "ticker": "0050.TW",
        "trend_params": {
          "trend_ma_days": 200,
          "trend_slope_days": 20,
          "trend_slope_thr_pct": 0.5
        },
        "twse_fallback_policy": {
          "max_retries": 3,
          "months_back_effective": null,
          "months_back_requested": 2,
          "months_back_unadjusted_cap": 2,
          "sleep_jitter_sec": 0.5,
          "sleep_sec": 1.0,
          "timeout_sec": 20
        },
        "tz": "Asia/Taipei",
        "vol_params": {
          "atr_days": 14,
          "rv_days": 20
        }
      },
      "pledge": {
        "decision": {
          "action_bucket": "VETO",
          "pledge_policy": "DISALLOW",
          "veto_reasons": [
            "regime_gate_closed",
            "no_chase_state:EXTREME_UPPER_BAND",
            "no_chase_z>= 1.50"
          ]
        },
        "inputs": {
          "bb_state": "EXTREME_UPPER_BAND",
          "bb_z": 2.2710145565515196,
          "forward_mode_primary": "clean",
          "regime_allowed": false
        },
        "scope": "compute_only_no_margin_no_chip",
        "thresholds": {
          "accumulate_z_threshold": -1.5,
          "no_chase_z_threshold": 1.5,
          "require_regime_allowed": true
        },
        "unconditional_tranche_levels": {
          "levels": [
            {
              "drawdown": -0.04797968897501359,
              "label": "10D_p10_uncond",
              "price_level": 77.25644969234536
            },
            {
              "drawdown": -0.06308016565735114,
              "label": "10D_p05_uncond",
              "price_level": 76.03104598653216
            },
            {
              "drawdown": -0.06866427606759168,
              "label": "20D_p10_uncond",
              "price_level": 75.57789541822046
            },
            {
              "drawdown": -0.09272268273151263,
              "label": "20D_p05_uncond",
              "price_level": 73.62555568073307
            }
          ],
          "note": "levels derived from unconditional forward_mdd quantiles; not conditioned on current state",
          "price_anchor": 81.1500015258789
        },
        "version": "pledge_guidance_v1"
      },
      "regime": {
        "allowed": false,
        "definition": "TREND_UP & RV20_percentile<=pctl_max & rv_hist_n>=min_samples => RISK_ON_ALLOWED",
        "inputs": {
          "bb_state": "EXTREME_UPPER_BAND",
          "rv_ann": 0.21892785245279517,
          "rv_ann_pctl": 82.71072796934867,
          "rv_hist_n": 4176,
          "trend_state": "TREND_UP"
        },
        "params": {
          "min_samples": 252,
          "rv_pctl_max": 60.0,
          "trend_required": "TREND_UP"
        },
        "passes": {
          "rv_hist_ok": true,
          "rv_ok": false,
          "trend_ok": true
        },
        "reasons": [
          "bb_extreme_upper_band_stretched"
        ],
        "tag": "RISK_OFF_OR_DEFENSIVE"
      },
      "trend": {
        "price_vs_trend_ma_pct": 42.78204169364075,
        "state": "TREND_UP",
        "trend_ma_days": 200,
        "trend_ma_last": 56.834879627227785,
        "trend_slope_days": 20,
        "trend_slope_pct": 6.473457401789284,
        "trend_slope_thr_pct": 0.5
      },
      "vol": {
        "rv_ann": 0.21892785245279517,
        "rv_ann_pctl": 82.71072796934867,
        "rv_days": 20,
        "rv_hist_n": 4176,
        "rv_hist_q20": 0.11200700772997503,
        "rv_hist_q50": 0.14832583123147391,
        "rv_hist_q80": 0.20824108519825732
      }
    },
    "roll25": {
      "schema_version": "twse_stats_v1",
      "generated_at_utc": "2026-02-27T09:55:44Z",
      "generated_at_local": "2026-02-27T17:55:44.942147+08:00",
      "timezone": "Asia/Taipei",
      "used_date": "2026-02-26",
      "run_day_tag": "WEEKDAY",
      "used_date_status": "DATA_NOT_UPDATED",
      "freshness_ok": true,
      "freshness_age_days": 1,
      "mode": "FULL",
      "ohlc_status": "OK",
      "backfill_months": 0,
      "backfill_limit": 252,
      "store_cap": 400,
      "fetch": {
        "fetch_plan": "openapi_primary",
        "cache_only_mode": false,
        "cache_only_reason": "",
        "notes": []
      },
      "series": {
        "close": {
          "asof": "2026-02-26",
          "win60": {
            "value": 35414.49,
            "window_n_target": 60,
            "window_n_actual": 60,
            "z": 2.307043,
            "p": 99.167
          },
          "win252": {
            "value": 35414.49,
            "window_n_target": 252,
            "window_n_actual": 252,
            "z": 2.774885,
            "p": 99.802
          },
          "window_note": {
            "n_total_available": 276
          }
        },
        "trade_value": {
          "asof": "2026-02-26",
          "win60": {
            "value": 1207836722507.0,
            "window_n_target": 60,
            "window_n_actual": 60,
            "z": 3.009013,
            "p": 99.167
          },
          "win252": {
            "value": 1207836722507.0,
            "window_n_target": 252,
            "window_n_actual": 252,
            "z": 4.352935,
            "p": 99.802
          },
          "window_note": {
            "n_total_available": 291
          }
        },
        "pct_change": {
          "asof": "2026-02-26",
          "win60": {
            "value": 0.004009818973611307,
            "window_n_target": 60,
            "window_n_actual": 60,
            "z": -0.465833,
            "p": 30.833
          },
          "win252": {
            "value": 0.004009818973611307,
            "window_n_target": 252,
            "window_n_actual": 252,
            "z": -0.113002,
            "p": 43.056
          },
          "window_note": {
            "n_total_available": 275,
            "note": "pct_change needs D-1 close; with backfill_limit=252, max pct_change points are typically <=251."
          }
        },
        "amplitude_pct": {
          "asof": "2026-02-26",
          "win60": {
            "value": 1.1516087139578686,
            "window_n_target": 60,
            "window_n_actual": 60,
            "z": -0.274213,
            "p": 49.167
          },
          "win252": {
            "value": 1.1516087139578686,
            "window_n_target": 252,
            "window_n_actual": 252,
            "z": -0.127707,
            "p": 56.548
          },
          "window_note": {
            "n_total_available": 275,
            "note": "amplitude_pct needs high/low + D-1 close; if OHLC missing, series is sparse and windows may be incomplete."
          }
        }
      },
      "derived": {
        "lookback_n_target": 20,
        "lookback_n_actual": 20,
        "vol_multiplier_20": 1.451967,
        "volume_amplified": false,
        "new_low_n": 0,
        "consecutive_down_days": 0,
        "definition": {
          "vol_win": 20,
          "vol_threshold": 1.5,
          "vol_min_points": 15,
          "newlow_win": 60,
          "newlow_min_points": 40
        }
      },
      "sources": {
        "daily_fmtqik_url": "https://openapi.twse.com.tw/v1/exchangeReport/FMTQIK",
        "daily_mi_5mins_hist_url": "https://openapi.twse.com.tw/v1/indicesReport/MI_5MINS_HIST",
        "backfill_fmtqik_url_tpl": "https://www.twse.com.tw/exchangeReport/FMTQIK?response=json&date={yyyymm01}",
        "backfill_mi_5mins_hist_url_tpl": "https://www.twse.com.tw/indicesReport/MI_5MINS_HIST?response=json&date={yyyymm01}"
      }
    },
    "taiwan_margin": {
      "schema_version": "taiwan_margin_financing_latest_v1",
      "generated_at_utc": "2026-02-27T02:02:01Z",
      "series": {
        "TWSE": {
          "source": "HiStock",
          "source_url": "https://histock.tw/stock/three.aspx?m=mg",
          "data_date": "2026-02-26",
          "rows": [
            {
              "date": "2026-02-26",
              "balance_yi": 3898.6,
              "chg_yi": 67.3
            },
            {
              "date": "2026-02-25",
              "balance_yi": 3831.3,
              "chg_yi": 56.3
            },
            {
              "date": "2026-02-24",
              "balance_yi": 3775.0,
              "chg_yi": 53.4
            },
            {
              "date": "2026-02-23",
              "balance_yi": 3721.6,
              "chg_yi": 46.6
            },
            {
              "date": "2026-02-11",
              "balance_yi": 3680.5,
              "chg_yi": -45.4
            },
            {
              "date": "2026-02-10",
              "balance_yi": 3725.9,
              "chg_yi": -28.8
            },
            {
              "date": "2026-02-09",
              "balance_yi": 3754.7,
              "chg_yi": 14.8
            },
            {
              "date": "2026-02-06",
              "balance_yi": 3739.9,
              "chg_yi": -89.3
            },
            {
              "date": "2026-02-05",
              "balance_yi": 3829.2,
              "chg_yi": -11.3
            },
            {
              "date": "2026-02-04",
              "balance_yi": 3840.5,
              "chg_yi": 19.2
            },
            {
              "date": "2026-02-03",
              "balance_yi": 3821.3,
              "chg_yi": 32.8
            },
            {
              "date": "2026-02-02",
              "balance_yi": 3788.5,
              "chg_yi": -50.4
            },
            {
              "date": "2026-01-30",
              "balance_yi": 3838.9,
              "chg_yi": 21.2
            },
            {
              "date": "2026-01-29",
              "balance_yi": 3817.8,
              "chg_yi": -31.4
            },
            {
              "date": "2026-01-28",
              "balance_yi": 3849.2,
              "chg_yi": 21.9
            },
            {
              "date": "2026-01-27",
              "balance_yi": 3827.3,
              "chg_yi": 11.5
            },
            {
              "date": "2026-01-26",
              "balance_yi": 3815.8,
              "chg_yi": 55.0
            },
            {
              "date": "2026-01-23",
              "balance_yi": 3760.8,
              "chg_yi": 43.4
            },
            {
              "date": "2026-01-22",
              "balance_yi": 3717.3,
              "chg_yi": 39.9
            },
            {
              "date": "2026-01-21",
              "balance_yi": 3677.5,
              "chg_yi": -34.8
            },
            {
              "date": "2026-01-20",
              "balance_yi": 3712.3,
              "chg_yi": 18.1
            },
            {
              "date": "2026-01-19",
              "balance_yi": 3694.2,
              "chg_yi": 60.2
            },
            {
              "date": "2026-01-16",
              "balance_yi": 3633.9,
              "chg_yi": 40.9
            },
            {
              "date": "2026-01-15",
              "balance_yi": 3593.0,
              "chg_yi": 8.5
            },
            {
              "date": "2026-01-14",
              "balance_yi": 3584.5,
              "chg_yi": 28.1
            },
            {
              "date": "2026-01-13",
              "balance_yi": 3556.4,
              "chg_yi": -8.5
            },
            {
              "date": "2026-01-12",
              "balance_yi": 3564.9,
              "chg_yi": 50.0
            },
            {
              "date": "2026-01-09",
              "balance_yi": 3514.9,
              "chg_yi": -8.9
            },
            {
              "date": "2026-01-08",
              "balance_yi": 3523.9,
              "chg_yi": -46.7
            },
            {
              "date": "2026-01-07",
              "balance_yi": 3570.6,
              "chg_yi": 25.1
            }
          ],
          "notes": [
            "候選表[0]欄位：日期 | 融資餘額(億) | 融資增加(億) | 融券餘額(張) | 融券增加(張) | 價格 | 比例 | 成交量(億)",
            "候選表[0]原始日期樣本：02/26, 02/25, 02/24, 02/23, 02/11",
            "候選表[0]解析rows=30",
            "HiStock 最終採用欄位：日期 | 融資餘額(億) | 融資增加(億) | 融券餘額(張) | 融券增加(張) | 價格 | 比例 | 成交量(億)",
            "unit.chg_yi from col='融資增加(億)': {'code': 'UNIT_YI', 'label': '億', 'raw': '億', 'source': 'colname:融資增加(億)'}",
            "Scheme2：未強求 Yahoo/WantGoo（常見 JS/403），以 HiStock 為主。"
          ],
          "chg_yi_unit": {
            "code": "UNIT_YI",
            "label": "億",
            "raw": "億",
            "source": "colname:融資增加(億)"
          },
          "fetched_at_utc": "2026-02-27T02:02:02Z",
          "http_error": null,
          "rows_count": 30
        },
        "TPEX": {
          "source": "HiStock",
          "source_url": "https://histock.tw/stock/three.aspx?m=mg&no=TWOI",
          "data_date": "2026-02-26",
          "rows": [
            {
              "date": "2026-02-26",
              "balance_yi": 1378.5,
              "chg_yi": 30.0
            },
            {
              "date": "2026-02-25",
              "balance_yi": 1348.5,
              "chg_yi": 12.0
            },
            {
              "date": "2026-02-24",
              "balance_yi": 1336.4,
              "chg_yi": 14.3
            },
            {
              "date": "2026-02-23",
              "balance_yi": 1322.2,
              "chg_yi": 11.3
            },
            {
              "date": "2026-02-11",
              "balance_yi": 1313.3,
              "chg_yi": -9.0
            },
            {
              "date": "2026-02-10",
              "balance_yi": 1322.3,
              "chg_yi": -6.6
            },
            {
              "date": "2026-02-09",
              "balance_yi": 1328.9,
              "chg_yi": -2.5
            },
            {
              "date": "2026-02-06",
              "balance_yi": 1331.4,
              "chg_yi": -9.7
            },
            {
              "date": "2026-02-05",
              "balance_yi": 1341.1,
              "chg_yi": -9.9
            },
            {
              "date": "2026-02-04",
              "balance_yi": 1351.0,
              "chg_yi": 13.7
            },
            {
              "date": "2026-02-03",
              "balance_yi": 1337.3,
              "chg_yi": 4.7
            },
            {
              "date": "2026-02-02",
              "balance_yi": 1332.6,
              "chg_yi": -17.9
            },
            {
              "date": "2026-01-30",
              "balance_yi": 1350.5,
              "chg_yi": 2.8
            },
            {
              "date": "2026-01-29",
              "balance_yi": 1347.7,
              "chg_yi": -11.0
            },
            {
              "date": "2026-01-28",
              "balance_yi": 1358.7,
              "chg_yi": 24.2
            },
            {
              "date": "2026-01-27",
              "balance_yi": 1334.5,
              "chg_yi": 11.6
            },
            {
              "date": "2026-01-26",
              "balance_yi": 1322.9,
              "chg_yi": 10.4
            },
            {
              "date": "2026-01-23",
              "balance_yi": 1312.5,
              "chg_yi": 11.1
            },
            {
              "date": "2026-01-22",
              "balance_yi": 1301.4,
              "chg_yi": 9.6
            },
            {
              "date": "2026-01-21",
              "balance_yi": 1291.8,
              "chg_yi": -10.3
            },
            {
              "date": "2026-01-20",
              "balance_yi": 1302.0,
              "chg_yi": 12.5
            },
            {
              "date": "2026-01-19",
              "balance_yi": 1289.5,
              "chg_yi": -2.6
            },
            {
              "date": "2026-01-16",
              "balance_yi": 1292.1,
              "chg_yi": 9.7
            },
            {
              "date": "2026-01-15",
              "balance_yi": 1282.3,
              "chg_yi": 4.2
            },
            {
              "date": "2026-01-14",
              "balance_yi": 1278.1,
              "chg_yi": 18.0
            },
            {
              "date": "2026-01-13",
              "balance_yi": 1260.2,
              "chg_yi": 0.6
            },
            {
              "date": "2026-01-12",
              "balance_yi": 1259.6,
              "chg_yi": 25.4
            },
            {
              "date": "2026-01-09",
              "balance_yi": 1234.2,
              "chg_yi": 10.5
            },
            {
              "date": "2026-01-08",
              "balance_yi": 1223.7,
              "chg_yi": 8.3
            },
            {
              "date": "2026-01-07",
              "balance_yi": 1215.4,
              "chg_yi": -0.3
            }
          ],
          "notes": [
            "候選表[0]欄位：日期 | 融資餘額(億) | 融資增加(億) | 融券餘額(張) | 融券增加(張) | 價格 | 比例 | 成交量(億)",
            "候選表[0]原始日期樣本：02/26, 02/25, 02/24, 02/23, 02/11",
            "候選表[0]解析rows=30",
            "HiStock 最終採用欄位：日期 | 融資餘額(億) | 融資增加(億) | 融券餘額(張) | 融券增加(張) | 價格 | 比例 | 成交量(億)",
            "unit.chg_yi from col='融資增加(億)': {'code': 'UNIT_YI', 'label': '億', 'raw': '億', 'source': 'colname:融資增加(億)'}",
            "Scheme2：未強求 Yahoo/WantGoo（常見 JS/403），以 HiStock 為主。"
          ],
          "chg_yi_unit": {
            "code": "UNIT_YI",
            "label": "億",
            "raw": "億",
            "source": "colname:融資增加(億)"
          },
          "fetched_at_utc": "2026-02-27T02:02:03Z",
          "http_error": null,
          "rows_count": 30
        }
      }
    }
  },
  "meta_env": {
    "GITHUB_SHA": "939710ed19b06f3545c1798272821144d9e42ad1",
    "GITHUB_RUN_ID": "22485593276",
    "GITHUB_WORKFLOW": "build-video-pack (roll25 + margin + tw0050_bb) - manual",
    "GITHUB_REF_NAME": "main",
    "GITHUB_REPOSITORY": "Joseph-Chou911/fred-cache"
  }
}